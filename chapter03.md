# فصل ۳ – کاوش در سیستم (Exploring the System)

اکنون که می‌دانیم چگونه در سیستم فایل حرکت کنیم، زمان آن رسیده است که یک تور هدایت‌شده در سیستم لینوکس خود داشته باشیم.  
اما پیش از شروع، لازم است چند دستور جدید یاد بگیریم که در طول مسیر به ما کمک خواهند کرد:

- **ls** – فهرست محتویات پوشه  
- **file** – تعیین نوع فایل  
- **less** – مشاهده محتوای فایل‌ها  

---

## لذت بیشتر با دستور `ls`  

دستور `ls` احتمالاً پرکاربردترین دستور لینوکس است و دلیل خوبی هم دارد.  
این دستور به ما اجازه می‌دهد محتوای پوشه‌ها را ببینیم و ویژگی‌های مختلفی از فایل‌ها و دایرکتوری‌ها را بررسی کنیم.

### مثال‌ها  

```bash
[me@linuxbox ~]$ ls
Desktop Documents Music Pictures Public Templates Videos
```

```bash
[me@linuxbox ~]$ ls /usr
bin games include lib local sbin share src
```

```bash
[me@linuxbox ~]$ ls ~ /usr

/home/me:
Desktop Documents Music Pictures Public Templates Videos

/usr:
bin games include lib local sbin share src
```

```bash
[me@linuxbox ~]$ ls -l
total 56
drwxrwxr-x 2 me me 4096 2017-10-26 17:20 Desktop
drwxrwxr-x 2 me me 4096 2017-10-26 17:20 Documents
...
```

---

## گزینه‌ها و آرگومان‌ها  

دستورات لینوکس معمولاً چنین ساختاری دارند:  

```bash
command -options arguments
```

- **گزینه‌ها (options):** رفتار دستور را تغییر می‌دهند (مانند `-l`)  
- **آرگومان‌ها (arguments):** موضوع دستور را مشخص می‌کنند (مانند نام فایل یا دایرکتوری)  

مثال:  

```bash
[me@linuxbox ~]$ ls -lt
```

- `-l` → نمایش قالب طولانی  
- `-t` → مرتب‌سازی بر اساس زمان تغییر  

معکوس کردن ترتیب:  

```bash
[me@linuxbox ~]$ ls -lt --reverse
```

📌 توجه: گزینه‌ها مانند نام فایل‌ها در لینوکس حساس به بزرگی و کوچکی حروف‌اند.  

---

## گزینه‌های متداول `ls`  

| گزینه | گزینه بلند | توضیح |
|-------|-------------|--------|
| `-a` | `--all` | نمایش همه فایل‌ها (حتی فایل‌های مخفی) |
| `-A` | `--almost-all` | مشابه `-a` اما بدون `.` و `..` |
| `-d` | `--directory` | نمایش خود پوشه به جای محتوای آن |
| `-F` | `--classify` | افزودن نماد به انتهای نام‌ها (مانند `/` برای پوشه) |
| `-h` | `--human-readable` | نمایش اندازه فایل‌ها به صورت خوانا (KB, MB) |
| `-l` | – | نمایش قالب طولانی |
| `-r` | `--reverse` | معکوس کردن ترتیب نتایج |
| `-S` | – | مرتب‌سازی بر اساس اندازه فایل |
| `-t` | – | مرتب‌سازی بر اساس زمان تغییر |

---

## بررسی قالب طولانی (`ls -l`)  

مثال:  

```bash
-rw-r--r-- 1 root root 32059 2017-04-03 11:05 oo-cd-cover.odf
```

| بخش | توضیح |
|------|--------|
| `-rw-r--r--` | نوع فایل و سطح دسترسی‌ها |
| `1` | تعداد لینک‌های سخت |
| `root` | نام مالک |
| `root` | گروه مالک |
| `32059` | اندازه فایل (بایت) |
| `2017-04-03 11:05` | زمان آخرین تغییر |
| `oo-cd-cover.odf` | نام فایل |

---

## تعیین نوع فایل با `file`  

در لینوکس نام فایل الزامی برای بیان محتوای آن نیست.  

```bash
[me@linuxbox ~]$ file picture.jpg
picture.jpg: JPEG image data, JFIF standard 1.01
```

📌 در لینوکس شعار این است: «همه‌چیز یک فایل است.»  

---

## مشاهده محتوای فایل‌ها با `less`  

```bash
[me@linuxbox ~]$ less /etc/passwd
```

اگر فایل طولانی بود می‌توانیم به بالا یا پایین حرکت کنیم. برای خروج کلید `q` را فشار دهید.  

### کلیدهای متداول در `less`  

| کلید | عملکرد |
|-------|---------|
| `Page Up` یا `b` | یک صفحه به عقب |
| `Page Down` یا Space | یک صفحه به جلو |
| ↑ / ↓ | حرکت خطی |
| `G` | رفتن به انتهای فایل |
| `g` یا `1G` | رفتن به ابتدای فایل |
| `/text` | جستجوی متن |
| `n` | نتیجه بعدی جستجو |
| `h` | نمایش راهنما |
| `q` | خروج |

📌 نام `less` یک بازی زبانی از عبارت «Less is more» است.  

---

## تور سیستم فایل  

استاندارد **Linux Filesystem Hierarchy Standard** ساختار فایل‌سیستم لینوکس را تعریف می‌کند.  
هرچند توزیع‌ها ممکن است کمی تفاوت داشته باشند، بیشتر آن‌ها نزدیک به این استاندارد هستند.  

### مراحل گشت:  
1. ورود به یک پوشه (`cd`)  
2. فهرست کردن محتوا (`ls -l`)  
3. بررسی نوع فایل با `file`  
4. مشاهده با `less` اگر متنی بود  
5. اگر فایل غیرمتنی بود و ترمینال را به‌هم ریخت، دستور `reset` را اجرا کنید  

📌 کاربران عادی نمی‌توانند سیستم را خراب کنند؛ این مسئولیت مدیر سیستم است!  

---

## دایرکتوری‌های مهم لینوکس  

| دایرکتوری | توضیح |
|-----------|-------|
| `/` | ریشه سیستم فایل |
| `/bin` | برنامه‌های حیاتی برای بوت سیستم |
| `/boot` | هسته لینوکس و بوت‌لودر |
| `/dev` | دستگاه‌ها به صورت فایل |
| `/etc` | فایل‌های پیکربندی سیستم |
| `/home` | پوشه‌های خانگی کاربران |
| `/lib` | کتابخانه‌های اشتراکی |
| `/media` | رسانه‌های قابل حمل (USB، CD و …) |
| `/mnt` | محل اتصال دستی دستگاه‌ها |
| `/opt` | نرم‌افزارهای اختیاری |
| `/proc` | فایل‌های مجازی برای دسترسی به هسته |
| `/root` | پوشه خانگی کاربر root |
| `/sbin` | برنامه‌های سیستمی برای مدیر سیستم |
| `/sys` | اطلاعات سخت‌افزاری سیستم |
| `/tmp` | فایل‌های موقت |
| `/usr` | برنامه‌ها و فایل‌های کاربری |
| `/var` | داده‌های متغیر مانند لاگ‌ها |

---

## لینک‌ها در لینوکس  

### لینک نمادین (Symbolic Link)  

```bash
lrwxrwxrwx 1 root root 11 2007-08-11 07:34 libc.so.6 -> libc-2.6.so
```

این نوع لینک به یک فایل دیگر اشاره دارد و برای مدیریت نسخه‌ها کاربردی است.  

### لینک سخت (Hard Link)  

نوع دیگری از لینک است که اجازه می‌دهد یک فایل چند نام داشته باشد اما شیوه‌ی متفاوتی دارد (جزئیات در فصل بعد).  

---

## جمع‌بندی  

در این فصل آموختیم:  
- کار با دستورات `ls`, `file`, `less`  
- بررسی قالب طولانی و نوع فایل‌ها  
- ساختار پوشه‌های مهم لینوکس  
- تفاوت لینک‌های نمادین و سخت  
- اهمیت فایل‌های متنی در لینوکس  

📚 منابع بیشتر:  
- [Linux Filesystem Hierarchy Standard](https://refspecs.linuxfoundation.org/fhs.shtml)  
- [Unix Directory Structure](http://en.wikipedia.org/wiki/Unix_directory_structure)  
- [ASCII Text Format](http://en.wikipedia.org/wiki/ASCII)